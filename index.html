<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TSV Review Sentiment • Hugging Face</title>

  <!-- Icons & Parser (per spec) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

  <!-- UX + Glassmorphism Styles -->
  <style>
    :root{
      /* Color system with contrast in mind (AA+) */
      --bg: #0a0f11;
      --bg-accent: #0f181a;
      --surface: rgba(255, 255, 255, 0.06);
      --panel: rgba(255, 255, 255, 0.08);
      --panel-strong: rgba(255, 255, 255, 0.12);
      --text: #f2f7fd;
      --text-muted: #cfe0f5;
      --brand: #66a3ff;
      --brand-2: #9fcfff;
      --ok: #73e2b5;
      --warn: #ffd166;
      --danger: #ff5a8c;
      --border: rgba(255,255,255,0.15);
      --focus: #ffffff;

      /* Sizes & radius */
      --radius: 16px;
      --radius-sm: 12px;
      --space: 16px;
      --shadow-1: 0 8px 30px rgba(102,163,255,.15);
      --shadow-2: 0 16px 50px rgba(102,163,255,.18);
      --blur: 14px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
      background:
        radial-gradient(1200px 800px at 85% -10%, rgba(102,163,255,.25) 0%, transparent 55%) fixed,
        radial-gradient(900px 600px at -10% 120%, rgba(159,207,255,.22) 0%, transparent 60%) fixed,
        linear-gradient(180deg, #060b0c 0%, var(--bg) 100%) fixed;
      color: var(--text);
      display:grid;
      grid-template-rows:auto 1fr auto;
      min-height:100svh;
    }

    /* Skip link for keyboard users */
    .skip-link{
      position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden;
    }
    .skip-link:focus{
      left:16px; top:16px; width:auto; height:auto; padding:10px 14px;
      background:#000; color:#fff; border-radius:10px; z-index:1000;
    }

    .container{
      max-width: 1080px;
      margin: 0 auto;
      padding: clamp(16px, 3vw, 28px);
      width:100%;
    }

    .app{
      background: var(--panel);
      backdrop-filter: blur(var(--blur));
      -webkit-backdrop-filter: blur(var(--blur));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: clamp(16px, 2.4vw, 22px);
      box-shadow: var(--shadow-1);
    }

    header.app-header{
      display:flex; align-items:center; gap:14px; margin-bottom:12px;
    }
    .logo{
      width:52px; height:52px; border-radius:14px;
      display:grid; place-items:center;
      color: var(--brand);
      border:1px solid var(--border);
      background: linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      backdrop-filter: blur(var(--blur));
      -webkit-backdrop-filter: blur(var(--blur));
      box-shadow: var(--shadow-2);
    }
    .title{
      margin:0;
      font-size:clamp(18px, 2.2vw, 22px);
      line-height:1.2;
      background: linear-gradient(90deg, var(--text) 0%, var(--brand-2) 100%);
      -webkit-background-clip: text; background-clip:text; color: transparent;
    }
    .subtitle{margin:.25rem 0 0 0; color: var(--text-muted); font-size:.95rem}

    main{
      margin-top: 12px;
      display:grid; gap:16px;
      grid-template-columns: 1fr;
    }
    @media (min-width: 920px){
      main{ grid-template-columns: 1.1fr .9fr; }
    }

    .panel{
      background: var(--surface);
      border:1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: clamp(12px, 2vw, 16px);
      backdrop-filter: blur(var(--blur));
      -webkit-backdrop-filter: blur(var(--blur));
    }
    .panel h2{
      margin:0 0 10px 0; font-size:.95rem; letter-spacing:.3px;
      color: var(--brand-2); text-transform:uppercase;
    }

    .field{display:grid; gap:8px; margin-bottom:12px;}
    label{font-size:.95rem; color: var(--text-muted);}
    .hint{font-size:.875rem; color: var(--text-muted)}

    input[type="password"], input[type="text"]{
      width:100%; padding: 12px 14px;
      border-radius: 12px; border:1px solid var(--border);
      background: rgba(255,255,255,.05);
      color: var(--text);
      outline:none;
      transition: box-shadow .2s ease, border-color .2s ease, background .2s ease;
    }
    input::placeholder{color: #c8daee}
    input:focus{
      border-color: var(--focus);
      box-shadow: 0 0 0 4px rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
    }

    .row{display:flex; gap:10px; align-items:center; flex-wrap:wrap}

    button{
      appearance:none; cursor:pointer;
      border:1px solid var(--border);
      border-radius:12px;
      font-weight:700;
      color: var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.03));
      padding: 12px 16px;
      transition: transform .06s ease, box-shadow .25s ease, border-color .2s ease, background .2s ease;
    }
    button:hover{ border-color: #fff; box-shadow: var(--shadow-1); }
    button:active{ transform: translateY(1px); }
    button:focus-visible{ outline: 3px solid var(--focus); outline-offset: 2px; }
    .ghost{ background: transparent; color: var(--brand-2); }
    .primary{
      background: linear-gradient(180deg, rgba(102,163,255,.22), rgba(102,163,255,.08));
      border-color: rgba(255,255,255,.28);
    }
    .primary:hover{ box-shadow: var(--shadow-2); }

    .status{
      display:flex; align-items:center; gap:8px;
      color: var(--text-muted); font-size:.95rem;
      padding: 6px 10px; border-radius:999px;
      background: rgba(255,255,255,.06);
      border:1px solid var(--border);
    }
    .dot{ width:10px; height:10px; border-radius:50%; background: var(--warn); box-shadow:0 0 10px rgba(255,209,102,.45) }
    .status.ready .dot{ background: var(--ok); box-shadow:0 0 12px rgba(115,226,181,.5) }
    .status.error .dot{ background: var(--danger); box-shadow:0 0 12px rgba(255,90,140,.5) }

    .pill{
      border:1px solid var(--border);
      background: rgba(255,255,255,.06);
      border-radius:999px; padding:7px 12px; color: var(--brand-2);
    }

    .review{
      background: rgba(255,255,255,.05);
      border: 1px dashed rgba(255,255,255,.25);
      border-radius: 14px;
      padding: 14px;
      min-height: 120px; line-height:1.55; font-size:1rem; color: var(--text);
      white-space: pre-wrap; word-break: break-word;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.05);
    }

    .sentiment{
      display:grid; grid-template-columns:auto 1fr; gap:12px; align-items:center;
      padding:12px; border-radius:14px;
      border:1px solid var(--border);
      background:
        radial-gradient(120px 80px at 0% 0%, rgba(102,163,255,.10), transparent),
        rgba(255,255,255,.05);
      min-height:72px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
    }
    .sentiment i{ font-size:2rem; text-shadow:0 6px 18px rgba(0,0,0,.28) }
    .positive{ color: var(--ok) }
    .negative{ color: var(--danger) }
    .neutral{ color: var(--warn) }

    .error{
      color: var(--text);
      background: linear-gradient(180deg, rgba(255,90,140,.16), rgba(255,90,140,.10));
      border:1px solid rgba(255,90,140,.45);
      padding: 12px 14px; border-radius:12px; display:none;
      white-space: pre-wrap; word-break: break-word;
      box-shadow: 0 10px 22px rgba(255,90,140,.12);
    }

    footer{
      color: var(--text-muted);
      font-size:.92rem;
      margin-top: 14px;
      display:flex; gap:8px; align-items:center; justify-content:space-between; flex-wrap:wrap;
    }
    a{ color: var(--brand-2); text-decoration:none }
    a:hover{ text-decoration:underline; text-underline-offset:3px }

    /* Motion-reduction for accessibility */
    @media (prefers-reduced-motion: reduce){
      *{ transition: none !important; animation: none !important; }
    }
  </style>
</head>
<body>
  <a class="skip-link" href="#main">Skip to content</a>

  <div class="container">
    <section class="app" aria-labelledby="appTitle">
      <header class="app-header">
        <div class="logo" aria-hidden="true"><i class="fa-solid fa-robot"></i></div>
        <div>
          <h1 id="appTitle" class="title">Random Review Sentiment (TSV → Hugging Face)</h1>
          <p class="subtitle">
            Parses <span style="font-family:ui-monospace, Menlo, Consolas, monospace">reviews_test.tsv</span> with Papa Parse and analyzes with
            <span style="font-family:ui-monospace, Menlo, Consolas, monospace">siebert/sentiment-roberta-large-english</span>.
          </p>
        </div>
      </header>

      <main id="main">
        <!-- Data & Token -->
        <section class="panel" aria-labelledby="dataToken">
          <h2 id="dataToken">Data & Token</h2>
          <div class="field">
            <label for="tokenInput">Hugging Face API Token (optional)</label>
            <input id="tokenInput" type="password" autocomplete="off"
                   placeholder="hf_xxx — optional for free, helps with rate limits"
                   aria-describedby="tokenHint" inputmode="text" />
            <div id="tokenHint" class="hint">Token is used only in your browser to set the <span style="font-family:ui-monospace, Menlo, Consolas, monospace">Authorization</span> header.</div>
          </div>

          <div class="row" style="margin-top:8px; gap:12px;">
            <button id="reloadBtn" class="ghost" type="button" aria-controls="reviewDisplay sentimentLabel sentimentScore"><i class="fa-solid fa-rotate"></i> Reload TSV</button>
            <div id="loadStatus" class="status" role="status" aria-live="polite"><span class="dot" aria-hidden="true"></span><span>Loading TSV…</span></div>
          </div>
        </section>

        <!-- Analyze -->
        <section class="panel" aria-labelledby="analyze">
          <h2 id="analyze">Analyze</h2>
          <div class="row" style="gap:12px; margin-bottom:10px;">
            <button id="analyzeBtn" class="primary" type="button"
                    aria-controls="reviewDisplay sentimentLabel sentimentScore sentimentIcon"><i class="fa-solid fa-wand-magic-sparkles"></i> Analyze Random Review</button>
            <span class="pill" id="countBadge" aria-live="polite">0 reviews loaded</span>
          </div>

          <div id="errorBox" class="error" role="alert"></div>

          <div class="field">
            <label for="reviewDisplay">Selected Review</label>
            <div id="reviewDisplay" class="review" role="region" aria-live="polite" tabindex="0"></div>
          </div>

          <div class="field">
            <label>Sentiment</label>
            <div class="sentiment" role="group" aria-live="polite" aria-label="Sentiment result">
              <div id="sentimentIcon" aria-hidden="true"><i class="fa-regular fa-circle-question neutral"></i></div>
              <div>
                <div id="sentimentLabel" style="font-weight:800; letter-spacing:.2px;">—</div>
                <div id="sentimentScore" class="hint">Score: —</div>
              </div>
            </div>
          </div>
        </section>
      </main>

      <footer>
        <div>Icons: Font Awesome • Parser: Papa Parse • API: Hugging Face Inference</div>
        <div>
          <a href="https://huggingface.co/siebert/sentiment-roberta-large-english" target="_blank" rel="noopener">Model Card</a> ·
          <a href="https://api-inference.huggingface.co/docs/python/html/index.html" target="_blank" rel="noopener">Inference API Docs</a>
        </div>
      </footer>
    </section>
  </div>

  <script src="app.js" defer></script>
</body>
</html>
